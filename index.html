<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ronit Bhatia | Portfolio</title>
    <meta name="description" content="Software Engineer & ML Enthusiast - Building impactful solutions through thoughtful engineering">
    <meta name="author" content="Ronit Bhatia">
    
    <script>
        // Redirect index.html to root URL on GitHub Pages
        // This ensures the URL always shows as ronitbhatia.github.io/ not ronitbhatia.github.io/index.html
        (function() {
            const isGitHubPages = window.location.hostname.includes('github.io');
            const pathname = window.location.pathname;
            
            // If we're on GitHub Pages and the URL contains index.html, redirect to root
            if (isGitHubPages && (pathname.includes('index.html') || pathname.endsWith('/index.html'))) {
                const newUrl = window.location.origin + '/' + (window.location.search || '') + (window.location.hash || '');
                window.location.replace(newUrl);
                return;
            }
        })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2.0.0">
    <script src="search.js"></script>
    <script>
        // Fix for local file serving - handle directory listing issue
        // IMPORTANT: When deployed to GitHub Pages, "/" automatically serves index.html
        // This script only helps with local testing
        (function() {
            // Only run on local file protocol, not on GitHub Pages
            const isLocalFile = window.location.protocol === 'file:';
            const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
            
            if (isLocalFile || isLocalhost) {
                // Check if we're seeing a directory listing (only on local)
                if (document.readyState === 'loading' || document.body === null) {
                    document.addEventListener('DOMContentLoaded', function() {
                        if (document.body && document.body.children.length === 0 && document.title === 'Index of /') {
                            if (window.location.pathname === '/' || window.location.pathname.endsWith('/')) {
                                window.location.replace('index.html');
                                return;
                            }
                        }
                    });
                }
                
                // Convert "/" links to "index.html" for local compatibility
                document.addEventListener('DOMContentLoaded', function() {
                    const rootLinks = document.querySelectorAll('a[href="/"], a[href="/#about"]');
                    rootLinks.forEach(link => {
                        const href = link.getAttribute('href');
                        if (href === '/') {
                            link.setAttribute('href', 'index.html');
                        } else if (href === '/#about') {
                            link.setAttribute('href', 'index.html#about');
                        }
                    });
                });
            }
        })();
        
        // Apply theme immediately to prevent flash of wrong theme
        (function() {
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            const savedTheme = localStorage.getItem('theme');
            const theme = savedTheme || (prefersDarkScheme.matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', theme);
            // Only set body theme if body exists (it might not be loaded yet)
            if (document.body) {
                document.body.setAttribute('data-theme', theme);
            }
        })();
    </script>
</head>
<body>
    <!-- Page Transition Overlay -->
    <div class="page-transition-overlay" id="page-transition-overlay"></div>
    
    <!-- Custom Cursor -->
    <div class="custom-cursor"></div>
    <div class="custom-cursor-dot"></div>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-brand">
                <div class="nav-logo">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="16,18 22,12 16,6"></polyline>
                        <polyline points="8,6 2,12 8,18"></polyline>
                    </svg>
                </div>
                <span class="nav-brand-text">Ronit Bhatia</span>
            </a>
            <div class="nav-links">
                <a href="#about" class="nav-link active">about</a>
                <a href="/projects" class="nav-link">projects</a>
                <a href="/experience" class="nav-link">experience</a>
                <a href="/education" class="nav-link">education</a>
                <a href="/initiative-impact" class="nav-link">initiative & impact</a>
                <a href="/skills" class="nav-link">skills</a>
            </div>
            
            <div class="nav-right">
                <!-- Dark Mode Toggle -->
                <button type="button" id="dark-mode-toggle" class="dark-mode-toggle" aria-label="Toggle dark mode">
                <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                </button>
                
                <!-- Mobile Menu Toggle -->
                <button type="button" id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Toggle mobile menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu">
        <div class="mobile-menu-content">
            <a href="#about" class="mobile-nav-link">about</a>
            <a href="/projects" class="mobile-nav-link">projects</a>
            <a href="/experience" class="mobile-nav-link">experience</a>
            <a href="/education" class="mobile-nav-link">education</a>
            <a href="/initiative-impact" class="mobile-nav-link">initiative & impact</a>
            <a href="/skills" class="mobile-nav-link">skills</a>
        </div>
    </div>

    <!-- Search Engine Hero Section -->
    <section id="home" class="hero-search">
        <div class="container">
            <div class="search-hero-content">
                <div class="search-brand">
                    <h1 class="search-logo">
                        <span class="search-logo-text">Ronit</span>
                        <span class="search-logo-accent">Amar</span>
                        <span class="search-logo-text">Bhatia</span>
                    </h1>
                    <p class="search-tagline">
                        <span>I am into</span> <span class="typing-text"></span>
                    </p>
                </div>
                
                <div class="hero-personal-info">
                    <div class="hero-avatar-section">
                        <div class="avatar-container">
                            <div class="avatar-wrapper">
                                <div class="avatar-inner">
                                    <img src="avatar.png" alt="Ronit Avatar" class="avatar-image">
                                </div>
                            </div>
                            <div class="wave-emoji">ðŸ‘‹</div>
                        </div>
                    </div>
                    <div class="hero-links">
                        <a href="mailto:roncy.bhatia@gmail.com" class="hero-link email" onclick="copyEmailToClipboard('roncy.bhatia@gmail.com', event)">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                            roncy.bhatia@gmail.com
                        </a>
                        <a href="https://github.com/ronitbhatia" target="_blank" class="hero-link github">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                            </svg>
                            GitHub
                        </a>
                        <a href="https://www.linkedin.com/in/ronit-bhatia/" target="_blank" class="hero-link linkedin">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                                <rect x="2" y="9" width="4" height="12"></rect>
                                <circle cx="4" cy="4" r="2"></circle>
                            </svg>
                            LinkedIn
                        </a>
                    </div>
                    <a href="Resume.pdf" download class="btn-primary">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7,10 12,15 17,10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Resume
                    </a>
                    <p class="search-subtitle">Search to discover my work, experience, and skills</p>
                </div>
                
                <div id="search-container" class="search-container">
                    <div class="search-box-wrapper">
                        <svg class="search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input 
                            type="text" 
                            id="search-input" 
                            class="search-input" 
                            placeholder="Search for projects, skills, experience, or anything about me..."
                            autocomplete="off"
                            spellcheck="false"
                        />
                    </div>
                    <div id="search-results" class="search-results"></div>
                </div>

                <div class="search-suggestions">
                    <p class="suggestions-label">Try searching for:</p>
                    <div class="suggestion-chips">
                        <button class="suggestion-chip" onclick="document.getElementById('search-input').value='machine learning'; document.getElementById('search-input').dispatchEvent(new Event('input'));">Machine Learning</button>
                        <button class="suggestion-chip" onclick="document.getElementById('search-input').value='projects'; document.getElementById('search-input').dispatchEvent(new Event('input'));">Projects</button>
                        <button class="suggestion-chip" onclick="document.getElementById('search-input').value='python'; document.getElementById('search-input').dispatchEvent(new Event('input'));">Python</button>
                        <button class="suggestion-chip" onclick="document.getElementById('search-input').value='experience'; document.getElementById('search-input').dispatchEvent(new Event('input'));">Experience</button>
                        <button class="suggestion-chip" onclick="document.getElementById('search-input').value='AI'; document.getElementById('search-input').dispatchEvent(new Event('input'));">AI</button>
                        <button class="suggestion-chip" onclick="document.getElementById('search-input').value='skills'; document.getElementById('search-input').dispatchEvent(new Event('input'));">Skills</button>
                    </div>
                </div>

                <div class="quick-links">
                    <a href="#about" class="quick-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        About Me
                    </a>
                    <a href="/projects" class="quick-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="16,18 22,12 16,6"></polyline>
                            <polyline points="8,6 2,12 8,18"></polyline>
                        </svg>
                        Projects
                    </a>
                    <a href="/experience" class="quick-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                        </svg>
                        Experience
                    </a>
                    <a href="/skills" class="quick-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <path d="M2 17l10 5 10-5"></path>
                            <path d="M2 12l10 5 10-5"></path>
                        </svg>
                        Skills
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section section-bg">
        <div class="container">
                            <div class="about-content animate-fade-in scroll-reveal">
                <div class="about-image">
                    <img src="IMG_5623.jpeg" alt="Ronit Bhatia" class="about-photo">
                </div>
                
                <div>
                    <h2 class="section-title" style="text-align: left; margin-bottom: 2rem;">About Me</h2>
                    <div class="about-text">
                        <p style="margin-bottom: 1.5rem;">
                            I turn complex problems into elegant code, and complex code into real-world impact. My approach combines deep technical execution with strategic thinking, building systems that don't just work, but work intelligently.
                        </p>
                        <p style="margin-bottom: 1.5rem;">
                            What gets me excited is translating ambitious ideas into engineering solutions that actually matter. Whether I'm developing neural networks, building data pipelines, or fine-tuning AI models, I bring both analytical thinking and creative problem-solving to every challenge. I believe the best work happens when you push technical boundaries while staying grounded in practical reality.
                        </p>
                        <p style="margin-bottom: 1.5rem;">
                            My engineering philosophy is simple: understand the bigger picture, then master the details. This perspective, shaped by my engineering management background, helps me build solutions that are both technically sound and strategically valuable. I'm drawn to challenges that require thinking differently, turning messy problems into clean, impactful solutions through thoughtful engineering.                        
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="mailto:roncy.bhatia@gmail.com" class="footer-link" onclick="copyEmailToClipboard('roncy.bhatia@gmail.com', event)" title="Click to copy email">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                </a>
                <a href="https://github.com/ronitbhatia" target="_blank" class="footer-link">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                    </svg>
                </a>
                <a href="https://www.linkedin.com/in/ronit-bhatia/" target="_blank" class="footer-link">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                        <rect x="2" y="9" width="4" height="12"></rect>
                        <circle cx="4" cy="4" r="2"></circle>
                    </svg>
                </a>
            </div>
            <p class="footer-text">Â© 2025 Ronit Bhatia. Built with HTML & CSS.</p>
        </div>
    </footer>

    <script>
        // Convert root URLs to index.html ONLY for local file protocol testing
        // On GitHub Pages, "/" automatically serves index.html, so we keep "/" links
        (function() {
            // Only convert if we're using file:// protocol (local testing)
            const isLocalFile = window.location.protocol === 'file:';
            
            // For local file testing only, convert "/" to "index.html"
            // On GitHub Pages (or any web server), keep "/" as it works correctly
            if (isLocalFile) {
                document.addEventListener('DOMContentLoaded', function() {
                    // Convert brand/logo links
                    const homeLinks = document.querySelectorAll('a[href="/"], a.nav-brand[href="/"]');
                    homeLinks.forEach(link => {
                        if (link.getAttribute('href') === '/') {
                            link.setAttribute('href', 'index.html');
                        }
                    });
                    
                    // Convert about links
                    const aboutLinks = document.querySelectorAll('a[href="/#about"]');
                    aboutLinks.forEach(link => {
                        link.setAttribute('href', 'index.html#about');
                    });
                });
            }
        })();

        // Mobile Menu Toggle
        (function() {
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            const body = document.body;
            
            if (!mobileMenuToggle || !mobileMenu) return;
            
            // Create overlay
            const overlay = document.createElement('div');
            overlay.className = 'mobile-menu-overlay';
            body.appendChild(overlay);
            
            function toggleMobileMenu() {
                const isOpen = mobileMenu.classList.contains('open');
                
                if (isOpen) {
                    mobileMenu.classList.remove('open');
                    mobileMenuToggle.classList.remove('active');
                    overlay.classList.remove('active');
                    body.style.overflow = '';
                } else {
                    mobileMenu.classList.add('open');
                    mobileMenuToggle.classList.add('active');
                    overlay.classList.add('active');
                    body.style.overflow = 'hidden';
                }
            }
            
            mobileMenuToggle.addEventListener('click', toggleMobileMenu);
            
            // Close menu when clicking overlay
            overlay.addEventListener('click', toggleMobileMenu);
            
            // Close menu when clicking a link
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.remove('open');
                    mobileMenuToggle.classList.remove('active');
                    overlay.classList.remove('active');
                    body.style.overflow = '';
                });
            });
            
            // Close menu on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
                    toggleMobileMenu();
                }
            });
        })();

        // Custom Cursor - Lightweight and Smooth
        (function() {
            // Disable on touch devices for better performance
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
                return;
            }
            
            const cursor = document.querySelector('.custom-cursor');
            const cursorDot = document.querySelector('.custom-cursor-dot');
            
            if (!cursor || !cursorDot) return;
            
            let mouseX = 0;
            let mouseY = 0;
            let cursorX = 0;
            let cursorY = 0;
            let dotX = 0;
            let dotY = 0;
            
            // Smooth animation using requestAnimationFrame for performance
            function animateCursor() {
                // Smooth cursor movement with easing
                cursorX += (mouseX - cursorX) * 0.15;
                cursorY += (mouseY - cursorY) * 0.15;
                
                // Dot follows more closely
                dotX += (mouseX - dotX) * 0.5;
                dotY += (mouseY - dotY) * 0.5;
                
                // Use transform for better performance (GPU accelerated)
                cursor.style.transform = `translate(${cursorX}px, ${cursorY}px) translate(-50%, -50%)`;
                cursorDot.style.transform = `translate(${dotX}px, ${dotY}px) translate(-50%, -50%)`;
                
                requestAnimationFrame(animateCursor);
            }
            
            // Initialize cursor position
            cursor.style.opacity = '1';
            cursorDot.style.opacity = '1';
            
            // Track mouse position
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            }, { passive: true });
            
            // Hide cursor when mouse leaves window
            document.addEventListener('mouseleave', () => {
                cursor.style.opacity = '0';
                cursorDot.style.opacity = '0';
            }, { passive: true });
            
            document.addEventListener('mouseenter', () => {
                cursor.style.opacity = '1';
                cursorDot.style.opacity = '1';
            }, { passive: true });
            
            // Hover effects on interactive elements
            const interactiveElements = document.querySelectorAll('a, button, input, textarea, select, [role="button"], [tabindex], .nav-link, .quick-link, .hero-link, .footer-link, .suggestion-chip, .card, .tag');
            
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.classList.add('hover');
                }, { passive: true });
                
                el.addEventListener('mouseleave', () => {
                    cursor.classList.remove('hover');
                }, { passive: true });
            });
            
            // Click effect
            document.addEventListener('mousedown', () => {
                cursor.classList.add('click');
            }, { passive: true });
            
            document.addEventListener('mouseup', () => {
                cursor.classList.remove('click');
            }, { passive: true });
            
            // Start animation
            animateCursor();
        })();

        // Smooth scroll behavior and active section highlighting
        document.addEventListener('DOMContentLoaded', function() {
            // Handle hash navigation on page load (enhanced) - but always remove hash from URL
            if (window.location.hash) {
                const hash = window.location.hash.substring(1);
                const scrollToHash = () => {
                    const section = document.getElementById(hash);
                    if (section) {
                        const navbar = document.querySelector('.navbar');
                        const offset = navbar ? navbar.offsetHeight + 20 : 100;
                        const targetPosition = section.offsetTop - offset;
                        window.scrollTo({
                            top: Math.max(0, targetPosition),
                            behavior: 'smooth'
                        });
                        // Remove hash from URL after scrolling
                        setTimeout(() => {
                            if (window.location.hash) {
                                window.history.replaceState(null, null, window.location.pathname + window.location.search);
                            }
                        }, 100);
                        return true;
                    }
                    return false;
                };
                
                // Try multiple times to ensure section is loaded
                if (!scrollToHash()) {
                    setTimeout(() => {
                        if (!scrollToHash()) {
                            setTimeout(scrollToHash, 500);
                        }
                    }, 200);
                } else {
                    // Remove hash immediately if section found
                    window.history.replaceState(null, null, window.location.pathname + window.location.search);
                }
            }
            
            // Always ensure URL doesn't have hash - remove it if it appears
            if (window.location.hash) {
                window.history.replaceState(null, null, window.location.pathname + window.location.search);
            }
            
            // Listen for hash changes and remove hash immediately
            window.addEventListener('hashchange', function() {
                if (window.location.hash) {
                    window.history.replaceState(null, null, window.location.pathname + window.location.search);
                }
            });
            
            // Also use global hash handler if available
            if (typeof window.handleHashNavigation === 'function') {
                window.handleHashNavigation();
            }
            
            const links = document.querySelectorAll('a[href^="#"]');
            const navLinks = document.querySelectorAll('.nav-link');
            const navbar = document.querySelector('.navbar');

            const getNavOffset = () => (navbar ? navbar.offsetHeight : 0) + 20; // add small breathing room

            // Keep scroll padding in sync with real navbar height
            const applyScrollPadding = () => {
                document.documentElement.style.scrollPaddingTop = getNavOffset() + 'px';
            };
            applyScrollPadding();
            window.addEventListener('resize', applyScrollPadding);

            // Enhanced smooth scrolling using dynamic offset with better easing
            // Always remove hash from URL - never show #about in URL
            links.forEach(link => {
                link.addEventListener('click', (e) => {
                    const href = link.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        e.preventDefault();
                        // Remove any existing hash from URL immediately
                        if (window.location.hash) {
                            window.history.replaceState(null, null, window.location.pathname + window.location.search);
                        }
                        const target = document.querySelector(href);
                        if (target) {
                            const targetPosition = target.offsetTop - getNavOffset();
                            // Use requestAnimationFrame for smoother scrolling
                            const startPosition = window.pageYOffset;
                            const distance = targetPosition - startPosition;
                            const duration = Math.min(Math.abs(distance) * 0.5, 1000); // Max 1 second
                            let start = null;
                            
                            function smoothScrollStep(timestamp) {
                                if (!start) start = timestamp;
                                const progress = timestamp - start;
                                const progressRatio = Math.min(progress / duration, 1);
                                
                                // Easing function for smooth acceleration/deceleration
                                const ease = progressRatio < 0.5
                                    ? 2 * progressRatio * progressRatio
                                    : 1 - Math.pow(-2 * progressRatio + 2, 2) / 2;
                                
                                window.scrollTo(0, startPosition + distance * ease);
                                
                                if (progress < duration) {
                                    requestAnimationFrame(smoothScrollStep);
                                } else {
                                    // Ensure hash is removed after scrolling completes
                                    if (window.location.hash) {
                                        window.history.replaceState(null, null, window.location.pathname + window.location.search);
                                    }
                                }
                            }
                            
                            requestAnimationFrame(smoothScrollStep);
                        }
                    }
                });
            });

            // Active section highlighting
            const sections = document.querySelectorAll('section[id]');
            
            function updateActiveNavLink() {
                const scrollPos = window.scrollY + getNavOffset();
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    const sectionId = section.getAttribute('id');
                    
                    if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                        // Remove active class from all nav links
                        navLinks.forEach(link => link.classList.remove('active'));
                        
                        // Add active class to corresponding nav link
                        const activeLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }

            // Update on scroll
            window.addEventListener('scroll', updateActiveNavLink);
            
            // Initial call
            updateActiveNavLink();

            // Enhanced typing animation
            const texts = [
                "Software Development",
                "Machine Learning Engineering", 
                "Data Analysis",
                "Product Management",
                "Web Development",
                "Business Analysis",
                "AI & Neural Networks",
                "Full-Stack Development"
            ];
            
            let textIndex = 0;
            let charIndex = 0;
            let isDeleting = false;
            const typingElement = document.querySelector('.typing-text');
            
            const typeWriter = () => {
                const currentText = texts[textIndex];
                
                if (!isDeleting) {
                    if (charIndex < currentText.length) {
                        if (typingElement) {
                            typingElement.textContent = currentText.substring(0, charIndex + 1);
                        }
                        charIndex++;
                        setTimeout(typeWriter, 100);
                    } else {
                        setTimeout(() => {
                            isDeleting = true;
                            typeWriter();
                        }, 2000);
                    }
                } else {
                    if (charIndex > 0) {
                        if (typingElement) {
                            typingElement.textContent = currentText.substring(0, charIndex - 1);
                        }
                        charIndex--;
                        setTimeout(typeWriter, 50);
                    } else {
                        isDeleting = false;
                        textIndex = (textIndex + 1) % texts.length;
                        setTimeout(typeWriter, 500);
                    }
                }
            };
            
            typeWriter();

            // Enhanced Intersection Observer for scroll animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -100px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        
                        // Add staggered animation for cards
                        if (entry.target.classList.contains('card')) {
                            const cards = entry.target.parentElement.querySelectorAll('.card');
                            cards.forEach((card, index) => {
                                card.style.setProperty('--stagger-index', index);
                                setTimeout(() => {
                                    card.classList.add('visible');
                                }, index * 150);
                            });
                        }
                    }
                });
            }, observerOptions);

            // Observe all animation elements
            document.querySelectorAll('.animate-fade-in, .scroll-reveal').forEach(el => {
                observer.observe(el);
            });

            // Create animated dots
            const createDots = () => {
                const hero = document.querySelector('.hero-search');
                if (!hero) {
                    return;
                }
                const dotsContainer = document.createElement('div');
                dotsContainer.className = 'animated-dots';
                
                for (let i = 0; i < 20; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    dot.style.left = `${Math.random() * 100}%`;
                    dot.style.top = `${Math.random() * 100}%`;
                    dot.style.animationDelay = `${Math.random() * 6}s`;
                    dotsContainer.appendChild(dot);
                }
                
                hero.appendChild(dotsContainer);
            };

            createDots();

            // Dark mode functionality - Simple approach like other pages
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            
            const currentTheme = localStorage.getItem('theme') || (prefersDarkScheme.matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', currentTheme);
            if (document.body) {
                document.body.setAttribute('data-theme', currentTheme);
            }
            
            // Apply theme to homepage-specific sections
            const heroSearch = document.querySelector('.hero-search');
            const aboutSection = document.querySelector('#about');
            if (heroSearch) {
                heroSearch.setAttribute('data-theme', currentTheme);
            }
            if (aboutSection) {
                aboutSection.setAttribute('data-theme', currentTheme);
            }
            
            function updateToggleIcon() {
                if (!darkModeToggle) return;
                const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
                darkModeToggle.setAttribute('aria-label', isDark ? 'Switch to light mode' : 'Switch to dark mode');
            }
            
            updateToggleIcon();
            
            // Toggle dark mode - simple approach like other pages
            darkModeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                // Set theme on html and body (like other pages)
                document.documentElement.setAttribute('data-theme', newTheme);
                if (document.body) {
                    document.body.setAttribute('data-theme', newTheme);
                }
                localStorage.setItem('theme', newTheme);
                
                // Apply theme to homepage-specific sections
                if (heroSearch) {
                    heroSearch.setAttribute('data-theme', newTheme);
                    heroSearch.style.removeProperty('background');
                    heroSearch.style.removeProperty('color');
                }
                if (aboutSection) {
                    aboutSection.setAttribute('data-theme', newTheme);
                    aboutSection.style.removeProperty('background');
                    aboutSection.style.removeProperty('color');
                    aboutSection.style.removeProperty('backdrop-filter');
                    aboutSection.style.removeProperty('-webkit-backdrop-filter');
                }
                
                updateToggleIcon();
                
                // Add smooth transition effect
                const bodyEl = document.body;
                if (heroSearch) {
                    heroSearch.style.transition = 'background 0.3s ease, color 0.3s ease';
                }
                if (bodyEl) {
                    bodyEl.style.transition = 'background 0.3s ease, color 0.3s ease';
                }
                if (aboutSection) {
                    aboutSection.style.transition = 'background 0.3s ease, color 0.3s ease';
                }
                
                setTimeout(() => {
                    if (heroSearch) heroSearch.style.transition = '';
                    if (bodyEl) bodyEl.style.transition = '';
                    if (aboutSection) aboutSection.style.transition = '';
                }, 300);
            });
            
            // Listen for system theme changes
            prefersDarkScheme.addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    const newTheme = e.matches ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    if (document.body) {
                        document.body.setAttribute('data-theme', newTheme);
                    }
                    if (heroSearch) {
                        heroSearch.setAttribute('data-theme', newTheme);
                    }
                    if (aboutSection) {
                        aboutSection.setAttribute('data-theme', newTheme);
                    }
                    updateToggleIcon();
                }
            });
            
            // Listen for system theme changes
            prefersDarkScheme.addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    const newTheme = e.matches ? 'dark' : 'light';
                    window.applyTheme(newTheme);
                    updateToggleIcon();
                }
            });

        });

        function toggleReadMore(id) {
            const moreContent = document.getElementById(`more-${id}`);
            const button = document.getElementById(`btn-${id}`);
            
            if (moreContent && button) {
                if (moreContent.classList.contains('show')) {
                    moreContent.classList.remove('show');
                    button.textContent = 'Read More';
                } else {
                    moreContent.classList.add('show');
                    button.textContent = 'Read Less';
                }
            }
        }

        // Email clipboard copy functionality
        function copyEmailToClipboard(email, event) {
            event.preventDefault();
            
            // Create a temporary textarea element
            const textarea = document.createElement('textarea');
            textarea.value = email;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            
            // Select and copy the text
            textarea.select();
            textarea.setSelectionRange(0, 99999); // For mobile devices
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopyNotification('Email copied to clipboard!');
                } else {
                    // Fallback for modern browsers
                    navigator.clipboard.writeText(email).then(() => {
                        showCopyNotification('Email copied to clipboard!');
                    }).catch(() => {
                        showCopyNotification('Failed to copy email');
                    });
                }
            } catch (err) {
                // Modern clipboard API fallback
                navigator.clipboard.writeText(email).then(() => {
                    showCopyNotification('Email copied to clipboard!');
                }).catch(() => {
                    showCopyNotification('Failed to copy email');
                });
            }
            
            // Clean up
            document.body.removeChild(textarea);
        }

        // Show copy notification
        function showCopyNotification(message) {
            // Remove existing notification if any
            const existingNotification = document.querySelector('.copy-notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'copy-notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--accent-primary);
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
                transform: translateX(100%);
                transition: transform 0.3s ease;
                backdrop-filter: blur(10px);
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
    
    <!-- Page Transition Animation -->
    <script>
        (function() {
            const overlay = document.getElementById('page-transition-overlay');
            if (!overlay) return;
            
            // Match overlay background to current theme
            const updateOverlayTheme = () => {
                overlay.style.background = getComputedStyle(document.documentElement).getPropertyValue('--bg-primary').trim() || '#fafbfc';
            };
            updateOverlayTheme();
            
            // Ensure overlay starts hidden and fade out smoothly if needed
            overlay.classList.remove('active', 'exiting');
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    requestAnimationFrame(() => {
                        overlay.classList.remove('active');
                    });
                });
            } else {
                requestAnimationFrame(() => {
                    overlay.classList.remove('active');
                });
            }
            
            // Intercept internal navigation clicks
            document.addEventListener('click', (e) => {
                const link = e.target.closest('a');
                if (!link || !link.href) return;
                
                try {
                    const url = new URL(link.href, window.location.origin);
                    const currentUrl = new URL(window.location.href);
                    
                    // Only intercept same-origin navigation
                    if (url.origin === currentUrl.origin && url.pathname !== currentUrl.pathname) {
                        // Skip if it's a hash-only change
                        if (url.pathname === currentUrl.pathname && url.hash !== currentUrl.hash) {
                            return;
                        }
                        
                        e.preventDefault();
                        
                        // Update overlay theme before showing
                        updateOverlayTheme();
                        
                        // Show overlay
                        overlay.classList.remove('exiting');
                        overlay.classList.add('active');
                        
                        // Navigate after brief delay
                        requestAnimationFrame(() => {
                            setTimeout(() => {
                                window.location.href = link.href;
                            }, 150);
                        });
                    }
                } catch (err) {
                    // Invalid URL, let browser handle it
                }
            }, { passive: true });
        })();
    </script>
</body>
</html>

